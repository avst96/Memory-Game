@page
@model MemoryGameAsp.net.Pages.GameModel
@{
}
<div class="container border border-2 p-4 mt-5 col-lg-8">

    <div class="row border border-1 d-flex align-items-center text-info">
        <div class="col-2 ps-0 h-100">
            <button class="btn btn-primary h-100 custom-text-nowrap" id="btnStart">Start Game</button>
        </div>
        <div class="col-auto ">
            <input class="form-check-input bg-info" type="radio" name="playerOption" id="multiPlayer" value="2 Player" autocomplete="off" checked />
            <label class="form-check-label me-2" for="multiPlayer">2 Player</label>
            <input class="form-check-input bg-info" type="radio" name="playerOption" id="solo" value="Solo" autocomplete="off" />
            <label class="form-check-label" for="solo">Solo</label>
        </div>
        <div class="col border-1 border-end border-start">
            <label class="me-2">Player 1 Sets:</label>
            <label id="player1Sets">0</label>
        </div>
        <div class="col">
            <label class="me-2">Player 2 Sets:</label>
            <label id="player2Sets">0</label>
        </div>
    </div>

    <div class="row border border-1 border-top-0 p-1 text-center fw-bold">
        <label class="col-2 border-end border-1" id="gameType">2 Player</label>
        <label class="col-10" id="gameMsg">Press Start to Start Game</label>
    </div>

    <div class="row">
        <table class="table-responsive">
            <tr>
                <td>
                    <button class="mycard " id="c1">I</button>
                </td>
                <td>
                    <button class="mycard" id="c2">I</button>
                </td>
                <td>
                    <button class="mycard" id="c3">I</button>
                </td>
                <td>
                    <button class="mycard" id="c4"></button>
                </td>
                <td>
                    <button class="mycard" id="c5"></button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="mycard" id="c6"></button>
                </td>
                <td>
                    <button class="mycard" id="c7"></button>
                </td>
                <td>
                    <button class="mycard" id="c8"></button>
                </td>
                <td>
                    <button class="mycard" id="c9"></button>
                </td>
                <td>
                    <button class="mycard" id="c10"></button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="mycard" id="c11"></button>
                </td>
                <td>
                    <button class="mycard" id="c12"></button>
                </td>
                <td>
                    <button class="mycard" id="c13"></button>
                </td>
                <td>
                    <button class="mycard" id="c14"></button>
                </td>
                <td>
                    <button class="mycard" id="c15"></button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="mycard" id="c16"></button>
                </td>
                <td>
                    <button class="mycard" id="c17"></button>
                </td>
                <td>
                    <button class="mycard" id="c18"></button>
                </td>
                <td>
                    <button class="mycard" id="c19"></button>
                </td>
                <td>
                    <button class="mycard" id="c20"></button>
                </td>
            </tr>
        </table>
    </div>

</div>


<script>
    const startBtn = document.getElementById("btnStart");
    const msg = document.getElementById("gameMsg");
    const playerModeMsg = document.getElementById("gameType");
    const rbMulti = document.getElementById('multiPlayer');
    const rbSolo = document.getElementById('solo');

    let gameStatus = 0;
    let isGameSolo = false;
    let allCards = document.querySelectorAll('.mycard');

    startBtn.addEventListener('click', startGame);
    rbMulti.addEventListener('change', setPlayerModeMsg);
    rbSolo.addEventListener('change', setPlayerModeMsg);
    allCards.forEach(c => c.addEventListener('click', pickCard));
    
    function startGame() {
        // If in middle of game, reset game
        if (gameStatus) {
            startBtn.innerHTML = "Start Game";
            msg.innerHTML = "Press Start to Start Game";
            rbMulti.removeAttribute('disabled');
            rbSolo.removeAttribute('disabled');
            allCards.forEach(c => c.classList.remove('picked'));
        }
        // Else start game
        else {
            startBtn.innerHTML = "Restart Game";
            msg.innerHTML = "Game Started";
            rbMulti.setAttribute('disabled', true);
            rbSolo.setAttribute('disabled', true);
            isGameSolo = rbSolo.checked;
        }
        gameStatus == 1 ? gameStatus = 0 : gameStatus = 1;
    }

    function pickCard(event) {
        if (!gameStatus) {
            return;
        }
        let card = event.target;
        if (!card.classList.contains('picked')) {
            card.classList.add('picked');
        }
    }



    function setPlayerModeMsg(event) {
        document.getElementById("gameType").innerHTML = event.target.value;
    }
</script>